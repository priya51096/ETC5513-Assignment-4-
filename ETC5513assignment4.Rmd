---
title: "Immigration Report"
author:
- familyname: Dingorkar
  othernames: Priya Ravindra
  address: Monash University
  email: pdin0008@student.monash.edu
  qualifications:  BE in Computer Enginnering, Pursing Master of Business Analytics
  correspondingauthor: true
- familyname: Babu
  othernames: Aarathy
  address: Monash University
  email: abab0012@student.monash.edu
  qualifications:  B.Tech
- familyname: Wang
  othernames: Junhao
  address: Monash University
  email: jwan0296@student.monash.edu
  qualifications: B.Accounting
- familyname: XXX (Please add your details Dilinie)
  othernames: XXX
  address: XXX
  email: XXX
  qualifications:  XXX
  correspondingauthor: true
department: ETC5513, Group 11\newline Junhao &\newline Aarathy &\newline Dilinie &\newline Priya
organization: Australian Government COVID19
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: false
---

```{r , echo = FALSE, message = FALSE, warning = FALSE}
# Libraries

library(tidyverse)
library(readr)
library(kableExtra)
library(bookdown)
library(countrycode)
library(tinytex)
```



\section*{Introduction}
   This dataset provides information about OECD coutries. each file includes a number of core variables (detailed country of birth, education and sex). So our goals is to study immigrant in OECD countries and use these core variables to analyse the situation of immigrants. In this category: Priya ; Aarathy; Junhao look into the gender gap of unemployment rate, and study the relationsip between education level unemployment; Dilinie study the level of education of residents of Australia vs the duration theyve been in in Australia.

\section*{Abstract}

\section*{Methodology}

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, cache = TRUE, warning = FALSE)
```

```{r}
C <- read_csv("data/DIOC_2015_16_File_C_1.csv") %>% rename("labour_force_status" = "lfs", "educational_level" = "edu_lfs")
```

```{r}
C1 <- C %>% mutate(gender = case_when(str_detect(sex, "1") ~ "male",
                         str_detect(sex, "2") ~ "female"))
C2 <- C1 %>% mutate(employment = case_when(str_detect(labour_force_status
, "1") ~ "employed",
                         str_detect(labour_force_status
, "2") ~ "unemployed",
                         str_detect(labour_force_status
, "3")~ "inactive",
                         str_detect(labour_force_status
, "99")~ "unknown"))
```


```{r}
GG <- C2 %>% select(!sex) %>% pivot_wider(names_from = gender, values_from = number) %>% select(country, male, female, employment)
```

```{r}
GGM <- GG %>% group_by(country, employment) %>% summarise(countM = sum(male, na.rm = TRUE)) %>% pivot_wider(names_from = employment, values_from = countM)
```


```{r}
GGM1 <- GGM %>% mutate(unemployrateM = (unemployed/(employed + inactive + unemployed)*100)) %>% select(country,unemployrateM)
```


```{r}
GGF <- GG %>% group_by(country, employment) %>% summarise(countM = sum(female, na.rm = TRUE)) %>% pivot_wider(names_from = employment, values_from = countM)
```

```{r}
GGF1 <- GGF %>% mutate(unemployrateF = (unemployed/(employed + inactive + unemployed))*100) %>% select(country,unemployrateF)
```

```{r unemployment_gendergap}
GGMF <- GGM1 %>% full_join(GGF1, "country") %>% mutate(unemployrateGAP = unemployrateF - unemployrateM)
```

```{r}
GGMF %>% kable(caption = "unemployment gendergap")
```

\newpage

```{r GAP, fig.width=11, fig.height=10, fig.cap = "unemployment gender gap", messgae =  FALSE}

GGMF%>% filter(country != "LUX") %>% filter(country!= "KOR") %>%
ggplot(aes(x = unemployrateGAP, y = country, color = country, fill = country)) +  
  geom_col()
```



Analysis:  


  We can draw conlusion from \ref{fig:GAP} thatGenerally speaking, gender gap in unemployment rate does exist, the unemployment rate gaps are negative in most country, this means female have lower unemployment rate than male.


```{r}
C3 <- C2 %>% mutate(educationlevel = case_when(str_detect(educational_level
, "1") ~ "low",
                         str_detect(educational_level
, "2") ~ "medium",
                         str_detect(educational_level
, "3")~ "high",
                         str_detect(educational_level
, "99")~ "unknown"))

```

```{r}
C4 <-C3 %>% 
  select(!labour_force_status) %>% 
  pivot_wider(names_from = employment, values_from = number) %>%
group_by(country, educationlevel) %>% 
  summarise(employed = sum(employed, na.rm = TRUE), unemployed = sum(unemployed, na.rm = TRUE), inactive = sum(inactive, na.rm = TRUE)) %>% 
  mutate(unemployRATE = unemployed/(employed + unemployed + inactive)) %>% 
  select(country, educationlevel, unemployRATE)
C4 %>% head(40) %>% kable(caption = "unemployrate on different level of education")

```

\pagebreak

```{r ed_un, fig.width = 11, fig.height = 10, fig.cap = "unemployment rate among different education level" }
C4 %>% filter(country != "LUX") %>% filter(country!= "KOR") %>%ggplot( aes(x = educationlevel, y = unemployRATE, color = educationlevel, fill = educationlevel)) + geom_col() +  facet_wrap(~ country)
```

Analysis:
  
  
  \ref{figure:ed_un} Generally speaking, most have lower unemployment rate compared to low education level groups, but this is not the case in TUR,PRT,RGC AND ITA.


Limitation:
   There are some missing values that can influence the outcome to some extent, it is like the data I use became a smaller sample.

